#!/usr/bin/env bash
#
# postinstall script

set -o nounset

# programs to install:

if [[ "$OS" == "Linux" ]]; then
    case "$DIST" in
        "Alpine Linux")
            sudo apk update
            sudo apk add \
                 bash-doc \
                 bash-completion \
                 gnupg \
                 pinentry \
                 htop \
                 less \
                 man \
                 man-pages \
                 tmux \
                 wget
            ;;
        "Ubuntu")
            sudo apt-get update
            sudo apt-get install -y \
                 aspell \
                 aspell-en \
                 emacs24-nox
            ;;
    esac
fi

if [[ "$OS" == "FreeBSD" ]]; then
    sudo pkg update
    sudo pkg install -U -y \
         aspell \
         bash-completion \
         emacs-nox11 \
         en-aspell \
         python27
fi

if [[ "$OS" == "Darwin" ]]; then
    brew update
    brew install \
         aspell \
         bash \
         bash-completion \
         flake8 \
         fzf \
         glib \
         gnups \
         go \
         htop \
         isync \
         jq \
         leiningen \
         libxml2 \
         markdown \
         pinentry \
         pinentry-mac \
         pyenv \
         pyenv-virtualenv \
         pyenv-virtualenvwrapper \
         syncthing \
         syncthing-inotify \
         the_silver_searcher \
         tmux \
         tree \
         w3m \
         wget
    brew install railwaycat/emacsmacport/emacs-mac --with-modern-icon --with-modules --with-xml2 --with-gnutls --with-glib
fi
